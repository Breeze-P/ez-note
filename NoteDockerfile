FROM golang:1.21.4
ENV GO111MODULE=on
ENV GOPROXY="https://goproxy.io"
ENV MysqlIp="127.0.0.1"
ENV EtcdIp="127.0.0.1"
ENV JAEGER_AGENT_HOST="127.0.0.1"
ENV JAEGER_DISABLED=false
ENV JAEGER_SAMPLER_TYPE="const"
ENV JAEGER_SAMPLER_PARAM=1
ENV JAEGER_REPORTER_LOG_SPANS=true
ENV JAEGER_AGENT_PORT=6831
WORKDIR $GOPATH/src/easy_note
COPY . $GOPATH/src/easy_note
WORKDIR $GOPATH/src/easy_note/cmd/note
RUN ["sh", "build.sh"]
EXPOSE 8888
ENTRYPOINT ["./output/bin/demonote"]